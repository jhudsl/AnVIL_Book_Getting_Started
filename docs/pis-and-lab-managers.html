<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 PIs and Lab Managers | Getting Started on AnVIL</title>
  <meta name="description" content="Guides to help new AnVIL users set up their accounts and start doing research on the AnVIL platform" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 PIs and Lab Managers | Getting Started on AnVIL" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Guides to help new AnVIL users set up their accounts and start doing research on the AnVIL platform" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 PIs and Lab Managers | Getting Started on AnVIL" />
  
  <meta name="twitter:description" content="Guides to help new AnVIL users set up their accounts and start doing research on the AnVIL platform" />
  



<meta name="date" content="2025-05-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/AnVIL_style/anvil_favicon.ico" type="image/x-icon" />
<link rel="prev" href="introduction.html"/>
<link rel="next" href="data-analysts.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B6QHG20WV6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B6QHG20WV6');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="assets/style.css" type="text/css" />
<link rel="stylesheet" href="assets/AnVIL_style/anvil.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="https://anvilproject.org/" target="_blank"><img src="assets/AnVIL_style/logo-anvil.png" style="width: 80%; padding-left: 15px; padding-top: 8px;"</a>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this Book</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#skills-level"><i class="fa fa-check"></i>Skills Level</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#anvil-collection"><i class="fa fa-check"></i>AnVIL Collection</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.0.1" data-path="introduction.html"><a href="introduction.html#what-is-anvil"><i class="fa fa-check"></i><b>1.0.1</b> What Is AnVIL?</a></li>
<li class="chapter" data-level="1.0.2" data-path="introduction.html"><a href="introduction.html#does-anvil-cost-money"><i class="fa fa-check"></i><b>1.0.2</b> Does AnVIL Cost Money?</a></li>
<li class="chapter" data-level="1.0.3" data-path="introduction.html"><a href="introduction.html#where-can-i-get-help"><i class="fa fa-check"></i><b>1.0.3</b> Where Can I Get Help?</a></li>
<li class="chapter" data-level="1.0.4" data-path="introduction.html"><a href="introduction.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.0.4</b> How to Use This Book</a></li>
<li class="chapter" data-level="1.0.5" data-path="introduction.html"><a href="introduction.html#scroll-highlight"><i class="fa fa-check"></i><b>1.0.5</b> Activate <code>scroll_highlight</code> Feature</a></li>
</ul></li>
<li class="part"><span><b>Account Setup</b></span></li>
<li class="chapter" data-level="2" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html"><i class="fa fa-check"></i><b>2</b> PIs and Lab Managers</a>
<ul>
<li class="chapter" data-level="2.1" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#overview-pis"><i class="fa fa-check"></i><b>2.1</b> Account Setup Overview</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#goals-for-this-guide"><i class="fa fa-check"></i><b>2.1.1</b> Goals for This Guide</a></li>
<li class="chapter" data-level="2.1.2" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#design-philosophy"><i class="fa fa-check"></i><b>2.1.2</b> Design Philosophy</a></li>
<li class="chapter" data-level="2.1.3" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#before-you-start"><i class="fa fa-check"></i><b>2.1.3</b> Before You Start</a></li>
<li class="chapter" data-level="2.1.4" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#account-setup-pis"><i class="fa fa-check"></i><b>2.1.4</b> Starting Setup</a></li>
<li class="chapter" data-level="2.1.5" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#lab-management-roles"><i class="fa fa-check"></i><b>2.1.5</b> Lab Management Roles</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#pis-step-1"><i class="fa fa-check"></i><b>2.2</b> Step 1: Create a Google Account</a></li>
<li class="chapter" data-level="2.3" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#step-2-set-up-google-billing"><i class="fa fa-check"></i><b>2.3</b> Step 2: Set Up Google Billing</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#create-a-google-billing-account"><i class="fa fa-check"></i><b>2.3.1</b> Create a Google Billing Account</a></li>
<li class="chapter" data-level="2.3.2" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#add-users-or-viewers-optional"><i class="fa fa-check"></i><b>2.3.2</b> Add Users or Viewers (optional)</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#step-3-add-terra-to-google-billing-account"><i class="fa fa-check"></i><b>2.4</b> Step 3: Add Terra to Google Billing Account</a></li>
<li class="chapter" data-level="2.5" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#step-4-create-terra-billing-projects"><i class="fa fa-check"></i><b>2.5</b> Step 4: Create Terra Billing Projects</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#create-a-billing-project"><i class="fa fa-check"></i><b>2.5.1</b> Create a Billing Project</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#step-5-set-budgets-and-alerts"><i class="fa fa-check"></i><b>2.6</b> Step 5: Set Budgets and Alerts</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#set-alerts"><i class="fa fa-check"></i><b>2.6.1</b> Set Alerts</a></li>
<li class="chapter" data-level="2.6.2" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#view-spend"><i class="fa fa-check"></i><b>2.6.2</b> View spend</a></li>
<li class="chapter" data-level="2.6.3" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#export-cost-data-to-bigquery"><i class="fa fa-check"></i><b>2.6.3</b> Export Cost Data to BigQuery</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#step-6-add-users-and-workspaces"><i class="fa fa-check"></i><b>2.7</b> Step 6: Add Users and Workspaces</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#create-a-new-workspace"><i class="fa fa-check"></i><b>2.7.1</b> Create a New Workspace</a></li>
<li class="chapter" data-level="2.7.2" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#add-members-to-workspaces"><i class="fa fa-check"></i><b>2.7.2</b> Add Members to Workspaces</a></li>
<li class="chapter" data-level="2.7.3" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#request-quota-increase"><i class="fa fa-check"></i><b>2.7.3</b> Request Quota Increase</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="pis-and-lab-managers.html"><a href="pis-and-lab-managers.html#pis-wrap-up"><i class="fa fa-check"></i><b>2.8</b> Wrap-Up</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-analysts.html"><a href="data-analysts.html"><i class="fa fa-check"></i><b>3</b> Data Analysts</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-analysts.html"><a href="data-analysts.html#overview-analysts"><i class="fa fa-check"></i><b>3.1</b> Account Setup Overview</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-analysts.html"><a href="data-analysts.html#goals-for-this-guide-1"><i class="fa fa-check"></i><b>3.1.1</b> Goals for This Guide</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-analysts.html"><a href="data-analysts.html#starting-setup"><i class="fa fa-check"></i><b>3.1.2</b> Starting Setup</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-analysts.html"><a href="data-analysts.html#data-analysts-step-1"><i class="fa fa-check"></i><b>3.2</b> Step 1: Create a Google Account</a></li>
<li class="chapter" data-level="3.3" data-path="data-analysts.html"><a href="data-analysts.html#step-2-set-up-terra"><i class="fa fa-check"></i><b>3.3</b> Step 2: Set Up Terra</a></li>
<li class="chapter" data-level="3.4" data-path="data-analysts.html"><a href="data-analysts.html#step-3-link-external-accounts-optional"><i class="fa fa-check"></i><b>3.4</b> Step 3: Link External Accounts (optional)</a></li>
<li class="chapter" data-level="3.5" data-path="data-analysts.html"><a href="data-analysts.html#data-analysts-wrap-up"><i class="fa fa-check"></i><b>3.5</b> Wrap-Up</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="consortia.html"><a href="consortia.html"><i class="fa fa-check"></i><b>4</b> Consortia</a>
<ul>
<li class="chapter" data-level="4.1" data-path="consortia.html"><a href="consortia.html#overview-consortia"><i class="fa fa-check"></i><b>4.1</b> Account Setup Overview</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="consortia.html"><a href="consortia.html#goals-for-this-guide-2"><i class="fa fa-check"></i><b>4.1.1</b> Goals for This Guide</a></li>
<li class="chapter" data-level="4.1.2" data-path="consortia.html"><a href="consortia.html#choosing-a-role"><i class="fa fa-check"></i><b>4.1.2</b> Choosing a Role</a></li>
<li class="chapter" data-level="4.1.3" data-path="consortia.html"><a href="consortia.html#consortia-responsibilities"><i class="fa fa-check"></i><b>4.1.3</b> Consortia Responsibilities</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="consortia.html"><a href="consortia.html#consortium-data-managers"><i class="fa fa-check"></i><b>4.2</b> Consortium Data Managers</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="consortia.html"><a href="consortia.html#managing-security-and-privacy-policies"><i class="fa fa-check"></i><b>4.2.1</b> Managing Security and Privacy Policies</a></li>
<li class="chapter" data-level="4.2.2" data-path="consortia.html"><a href="consortia.html#account-setup"><i class="fa fa-check"></i><b>4.2.2</b> Account Setup</a></li>
<li class="chapter" data-level="4.2.3" data-path="consortia.html"><a href="consortia.html#two-factor-authentication"><i class="fa fa-check"></i><b>4.2.3</b> Two Factor Authentication</a></li>
<li class="chapter" data-level="4.2.4" data-path="consortia.html"><a href="consortia.html#set-up-terra-authorization-domains"><i class="fa fa-check"></i><b>4.2.4</b> Set Up Terra Authorization Domains</a></li>
<li class="chapter" data-level="4.2.5" data-path="consortia.html"><a href="consortia.html#granting-access"><i class="fa fa-check"></i><b>4.2.5</b> Granting Access</a></li>
<li class="chapter" data-level="4.2.6" data-path="consortia.html"><a href="consortia.html#revoking-access"><i class="fa fa-check"></i><b>4.2.6</b> Revoking Access</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="consortia.html"><a href="consortia.html#consortium-pis-and-lab-managers"><i class="fa fa-check"></i><b>4.3</b> Consortium PIs and Lab Managers</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="consortia.html"><a href="consortia.html#be-aware-of-security-policies"><i class="fa fa-check"></i><b>4.3.1</b> Be Aware of Security Policies</a></li>
<li class="chapter" data-level="4.3.2" data-path="consortia.html"><a href="consortia.html#account-setup-1"><i class="fa fa-check"></i><b>4.3.2</b> Account Setup</a></li>
<li class="chapter" data-level="4.3.3" data-path="consortia.html"><a href="consortia.html#two-factor-authentication-1"><i class="fa fa-check"></i><b>4.3.3</b> Two Factor Authentication</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="consortia.html"><a href="consortia.html#consortium-data-analysts-and-researchers"><i class="fa fa-check"></i><b>4.4</b> Consortium Data Analysts and Researchers</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="consortia.html"><a href="consortia.html#be-aware-of-security-policies-1"><i class="fa fa-check"></i><b>4.4.1</b> Be Aware of Security Policies</a></li>
<li class="chapter" data-level="4.4.2" data-path="consortia.html"><a href="consortia.html#account-setup-2"><i class="fa fa-check"></i><b>4.4.2</b> Account Setup</a></li>
<li class="chapter" data-level="4.4.3" data-path="consortia.html"><a href="consortia.html#two-factor-authentication-2"><i class="fa fa-check"></i><b>4.4.3</b> Two Factor Authentication</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="consortia.html"><a href="consortia.html#consortium-data-submitters"><i class="fa fa-check"></i><b>4.5</b> Consortium Data Submitters</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="consortia.html"><a href="consortia.html#be-aware-of-security-policies-2"><i class="fa fa-check"></i><b>4.5.1</b> Be Aware of Security Policies</a></li>
<li class="chapter" data-level="4.5.2" data-path="consortia.html"><a href="consortia.html#account-setup-3"><i class="fa fa-check"></i><b>4.5.2</b> Account Setup</a></li>
<li class="chapter" data-level="4.5.3" data-path="consortia.html"><a href="consortia.html#two-factor-authentication-3"><i class="fa fa-check"></i><b>4.5.3</b> Two Factor Authentication</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="consortia.html"><a href="consortia.html#consortia-wrap-up"><i class="fa fa-check"></i><b>4.6</b> Wrap-Up</a></li>
</ul></li>
<li class="part"><span><b>Working on AnVIL</b></span></li>
<li class="chapter" data-level="5" data-path="workspaces.html"><a href="workspaces.html"><i class="fa fa-check"></i><b>5</b> Workspaces</a>
<ul>
<li class="chapter" data-level="5.1" data-path="workspaces.html"><a href="workspaces.html#access-your-workspaces"><i class="fa fa-check"></i><b>5.1</b> Access Your Workspaces</a></li>
<li class="chapter" data-level="5.2" data-path="workspaces.html"><a href="workspaces.html#clone-workspace"><i class="fa fa-check"></i><b>5.2</b> Clone an Existing Workspace</a></li>
<li class="chapter" data-level="5.3" data-path="workspaces.html"><a href="workspaces.html#create-a-new-workspace-1"><i class="fa fa-check"></i><b>5.3</b> Create a New Workspace</a></li>
<li class="chapter" data-level="5.4" data-path="workspaces.html"><a href="workspaces.html#add-members-to-workspace"><i class="fa fa-check"></i><b>5.4</b> Add Members to Workspace</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="jupyter-notebook.html"><a href="jupyter-notebook.html"><i class="fa fa-check"></i><b>6</b> Jupyter Notebook</a>
<ul>
<li class="chapter" data-level="6.1" data-path="jupyter-notebook.html"><a href="jupyter-notebook.html#jupyter-notebook-video-tutorial"><i class="fa fa-check"></i><b>6.1</b> Jupyter Notebook: Video tutorial</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="jupyter-notebook.html"><a href="jupyter-notebook.html#objectives"><i class="fa fa-check"></i><b>6.1.1</b> Objectives</a></li>
<li class="chapter" data-level="6.1.2" data-path="jupyter-notebook.html"><a href="jupyter-notebook.html#slides"><i class="fa fa-check"></i><b>6.1.2</b> Slides</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="galaxy.html"><a href="galaxy.html"><i class="fa fa-check"></i><b>7</b> Galaxy</a>
<ul>
<li class="chapter" data-level="7.1" data-path="galaxy.html"><a href="galaxy.html#galaxy-video-tutorial"><i class="fa fa-check"></i><b>7.1</b> Galaxy: Video tutorial</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="galaxy.html"><a href="galaxy.html#objectives-1"><i class="fa fa-check"></i><b>7.1.1</b> Objectives</a></li>
<li class="chapter" data-level="7.1.2" data-path="galaxy.html"><a href="galaxy.html#slides-1"><i class="fa fa-check"></i><b>7.1.2</b> Slides</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="galaxy.html"><a href="galaxy.html#galaxy-step-by-step-guide"><i class="fa fa-check"></i><b>7.2</b> Galaxy: Step-by-step guide</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="galaxy.html"><a href="galaxy.html#starting-galaxy"><i class="fa fa-check"></i><b>7.2.1</b> Starting Galaxy</a></li>
<li class="chapter" data-level="7.2.2" data-path="galaxy.html"><a href="galaxy.html#navigating-galaxy"><i class="fa fa-check"></i><b>7.2.2</b> Navigating Galaxy</a></li>
<li class="chapter" data-level="7.2.3" data-path="galaxy.html"><a href="galaxy.html#deleting-galaxy-environment"><i class="fa fa-check"></i><b>7.2.3</b> Deleting Galaxy environment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i><b>8</b> RStudio</a>
<ul>
<li class="chapter" data-level="8.1" data-path="rstudio.html"><a href="rstudio.html#rstudio-video-tutorial"><i class="fa fa-check"></i><b>8.1</b> RStudio: Video tutorial</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="rstudio.html"><a href="rstudio.html#objectives-2"><i class="fa fa-check"></i><b>8.1.1</b> Objectives</a></li>
<li class="chapter" data-level="8.1.2" data-path="rstudio.html"><a href="rstudio.html#slides-2"><i class="fa fa-check"></i><b>8.1.2</b> Slides</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="rstudio.html"><a href="rstudio.html#rstudio-step-by-step-guide"><i class="fa fa-check"></i><b>8.2</b> RStudio: Step-by-step guide</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="rstudio.html"><a href="rstudio.html#launch-rstudio-cloud-environment"><i class="fa fa-check"></i><b>8.2.1</b> Launch RStudio Cloud Environment</a></li>
<li class="chapter" data-level="8.2.2" data-path="rstudio.html"><a href="rstudio.html#tour-rstudio"><i class="fa fa-check"></i><b>8.2.2</b> Tour RStudio</a></li>
<li class="chapter" data-level="8.2.3" data-path="rstudio.html"><a href="rstudio.html#stopping"><i class="fa fa-check"></i><b>8.2.3</b> Pause RStudio</a></li>
<li class="chapter" data-level="8.2.4" data-path="rstudio.html"><a href="rstudio.html#delete-rstudio-cloud-environment"><i class="fa fa-check"></i><b>8.2.4</b> Delete RStudio Cloud Environment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>9</b> Data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="data.html"><a href="data.html#bring-your-own-data"><i class="fa fa-check"></i><b>9.1</b> Bring Your Own Data</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="data.html"><a href="data.html#bring-data-overview"><i class="fa fa-check"></i><b>9.1.1</b> Overview</a></li>
<li class="chapter" data-level="9.1.2" data-path="data.html"><a href="data.html#browser-upload-single-files"><i class="fa fa-check"></i><b>9.1.2</b> Browser: Upload Single Files</a></li>
<li class="chapter" data-level="9.1.3" data-path="data.html"><a href="data.html#browser-upload-folders"><i class="fa fa-check"></i><b>9.1.3</b> Browser: Upload Folders</a></li>
<li class="chapter" data-level="9.1.4" data-path="data.html"><a href="data.html#gsutil-local-to-cloud"><i class="fa fa-check"></i><b>9.1.4</b> <code>gsutil</code>: Local to Cloud</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="data.html"><a href="data.html#analyze-existing-data"><i class="fa fa-check"></i><b>9.2</b> Analyze Existing Data</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="data.html"><a href="data.html#anvil-data-library"><i class="fa fa-check"></i><b>9.2.1</b> AnVIL Data Library</a></li>
<li class="chapter" data-level="9.2.2" data-path="data.html"><a href="data.html#anvil-dataset-catalog"><i class="fa fa-check"></i><b>9.2.2</b> AnVIL Dataset Catalog</a></li>
<li class="chapter" data-level="9.2.3" data-path="data.html"><a href="data.html#anvil-data-explorer"><i class="fa fa-check"></i><b>9.2.3</b> AnVIL Data Explorer</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="workflows.html"><a href="workflows.html"><i class="fa fa-check"></i><b>10</b> Workflows</a>
<ul>
<li class="chapter" data-level="10.0.1" data-path="workflows.html"><a href="workflows.html#pre-configured-workflow"><i class="fa fa-check"></i><b>10.0.1</b> Pre-configured Workflow</a></li>
<li class="chapter" data-level="10.0.2" data-path="workflows.html"><a href="workflows.html#create-a-custom-workflow"><i class="fa fa-check"></i><b>10.0.2</b> Create a Custom Workflow</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="faqs.html"><a href="faqs.html"><i class="fa fa-check"></i><b>A</b> FAQs</a>
<ul>
<li class="chapter" data-level="A.0.1" data-path="faqs.html"><a href="faqs.html#what-is-anvil-1"><i class="fa fa-check"></i><b>A.0.1</b> What is AnVIL?</a></li>
<li class="chapter" data-level="A.0.2" data-path="faqs.html"><a href="faqs.html#how-do-i-get-started"><i class="fa fa-check"></i><b>A.0.2</b> How Do I Get Started?</a></li>
<li class="chapter" data-level="A.0.3" data-path="faqs.html"><a href="faqs.html#what-data-is-available"><i class="fa fa-check"></i><b>A.0.3</b> What Data Is Available?</a></li>
<li class="chapter" data-level="A.0.4" data-path="faqs.html"><a href="faqs.html#how-do-i-perform-an-analysis"><i class="fa fa-check"></i><b>A.0.4</b> How Do I Perform an Analysis?</a></li>
<li class="chapter" data-level="A.0.5" data-path="faqs.html"><a href="faqs.html#where-can-i-get-help-1"><i class="fa fa-check"></i><b>A.0.5</b> Where Can I Get Help?</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="troubleshooting.html"><a href="troubleshooting.html"><i class="fa fa-check"></i><b>B</b> Troubleshooting</a>
<ul>
<li class="chapter" data-level="B.0.1" data-path="troubleshooting.html"><a href="troubleshooting.html#create-terra-billing-project"><i class="fa fa-check"></i><b>B.0.1</b> Create Terra Billing Project</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="authorization-domains.html"><a href="authorization-domains.html"><i class="fa fa-check"></i><b>C</b> Authorization Domains</a></li>
<li class="chapter" data-level="D" data-path="budget-templates.html"><a href="budget-templates.html"><i class="fa fa-check"></i><b>D</b> Budget Templates</a>
<ul>
<li class="chapter" data-level="D.0.1" data-path="budget-templates.html"><a href="budget-templates.html#types-of-costs"><i class="fa fa-check"></i><b>D.0.1</b> Types of Costs</a></li>
<li class="chapter" data-level="D.0.2" data-path="budget-templates.html"><a href="budget-templates.html#usage-of-budget-templates"><i class="fa fa-check"></i><b>D.0.2</b> Usage of Budget Templates</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="irb-templates.html"><a href="irb-templates.html"><i class="fa fa-check"></i><b>E</b> IRB Templates</a>
<ul>
<li class="chapter" data-level="E.0.1" data-path="irb-templates.html"><a href="irb-templates.html#general-information"><i class="fa fa-check"></i><b>E.0.1</b> General Information</a></li>
<li class="chapter" data-level="E.0.2" data-path="irb-templates.html"><a href="irb-templates.html#description-of-anvil"><i class="fa fa-check"></i><b>E.0.2</b> Description of AnVIL</a></li>
<li class="chapter" data-level="E.0.3" data-path="irb-templates.html"><a href="irb-templates.html#data-storage"><i class="fa fa-check"></i><b>E.0.3</b> Data Storage</a></li>
<li class="chapter" data-level="E.0.4" data-path="irb-templates.html"><a href="irb-templates.html#privacy-and-confidentiality"><i class="fa fa-check"></i><b>E.0.4</b> Privacy and Confidentiality</a></li>
<li class="chapter" data-level="E.0.5" data-path="irb-templates.html"><a href="irb-templates.html#security"><i class="fa fa-check"></i><b>E.0.5</b> Security</a></li>
<li class="chapter" data-level="E.0.6" data-path="irb-templates.html"><a href="irb-templates.html#example-language-for-informed-consent"><i class="fa fa-check"></i><b>E.0.6</b> Example Language for Informed Consent</a></li>
<li class="chapter" data-level="E.0.7" data-path="irb-templates.html"><a href="irb-templates.html#additional-resources"><i class="fa fa-check"></i><b>E.0.7</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="F" data-path="overview-videos.html"><a href="overview-videos.html"><i class="fa fa-check"></i><b>F</b> Overview Videos</a></li>
<li class="chapter" data-level="G" data-path="give-us-feedback.html"><a href="give-us-feedback.html"><i class="fa fa-check"></i><b>G</b> Give us Feedback</a></li>
<li class="chapter" data-level="" data-path="about.html"><a href="about.html"><i class="fa fa-check"></i>About the Authors</a></li>
<li class="divider"></li>
<p style="text-align:center;"> <a href="https://github.com/jhudsl/OTTR_Template" target="blank" > This content was published with</a> <a href="https://bookdown.org/" target="blank"> bookdown by: </a> </p>
<p style="text-align:center;"> <a href="http://jhudatascience.org/"> The Johns Hopkins Data Science Lab </a></p>
<a href="http://jhudatascience.org/"><img src="https://jhudatascience.org/images/dasl.png" style=" width: 80%; padding-left: 40px; padding-top: 8px; vertical-align: top "</a>
<p style="text-align:center; font-size: 12px;"> <a href="https://github.com/rstudio4edu/rstudio4edu-book/"> Style adapted from: rstudio4edu-book </a> <a href ="https://creativecommons.org/licenses/by/2.0/"> (CC-BY 2.0) </a></p>
<p style="padding-left: 40px;"><div class="trapezoid" style = "padding-left: 40px;"><span><a href="https://docs.google.com/forms/d/e/1FAIpQLScrDVb_utm55pmb_SHx-RgELTEbCCWdLea0T3IzS0Oj00GE4w/viewform?usp=pp_url&entry.1565230805=Getting+Started+on+AnVIL"> Click here to provide feedback</a> <img src="assets/itcr_arrow.png" style=" width: 10%" ></span></div></p>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Getting Started on AnVIL</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <!--<script src="assets/hideOutput.js"></script>-->
</head>
        


<div class="hero-image-container"> 
  <img class= "hero-image" src="assets/AnVIL_style/dasl_thin_main_image.png">
</div>
<div id="pis-and-lab-managers" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> PIs and Lab Managers<a href="pis-and-lab-managers.html#pis-and-lab-managers" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter is targeted towards people who are responsible for bringing a team to AnVIL. Broadly targeted towards principal investigators (PIs), but also relevant to team leads or lab managers, you will find here:</p>
<ul>
<li><strong>Account Setup Overview</strong> – Design philosophy and goals for this guide - is this a good fit for your team? What should you know before you start?</li>
<li><strong>Account Setup Steps</strong> – Step-by-step instructions to create your first accounts on AnVIL and connect your team members</li>
</ul>
<p>The Appendices of this book contain additional information that may be of interest, including:</p>
<ul>
<li>Templates for including AnVIL in grant applications (<a href="budget-templates.html#budget-templates">Budget Templates</a>, <a href="irb-templates.html#irb-templates">IRB Templates</a>)</li>
<li>Information regarding AnVIL’s security features for protecting sensitive research (<a href="authorization-domains.html#authorization-domains">Authorization Domains</a>)</li>
</ul>
<div class="notice">
<p>Please click on the subsection headers in the left hand
navigation bar (e.g., 2.1, 4.3) a second time to expand the
table of contents and enable the <code>scroll_highlight</code> feature
(<a href="introduction.html#scroll-highlight">see more</a>).</p>
</div>
<div id="overview-pis" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Account Setup Overview<a href="pis-and-lab-managers.html#overview-pis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="goals-for-this-guide" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Goals for This Guide<a href="pis-and-lab-managers.html#goals-for-this-guide" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><img src="02-pis_files/figure-html/1c272-o1y4OdLu0hzr-5xDyTyrJVEmp8Jg55TPDgGZik_gd5c49c5c55_0_165.png" alt="List of goals for this guide: 1) get your accounts, 2) set up billing, 3) set up your lab members to do research on AnVIL, and 4) monitor and manage spending." width="480" /></p>
</div>
<div id="design-philosophy" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Design Philosophy<a href="pis-and-lab-managers.html#design-philosophy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This guide provides an opinionated walkthrough on how to set up AnVIL for your lab, based on experiences from many labs actively using AnVIL. These step-by-step instructions take team leads that are completely new to the AnVIL through account setup to the point where team members can start working on AnVIL. Following the recommendations in this guide will help you more clearly see where charges are coming from and have greater control over which users can spend your money and access your data. In support of these goals we have made the following design decisions:</p>
<ol style="list-style-type: decimal">
<li>COST CONTROL</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>Prevent charges to your funding account until you explicitly give authorization by starting with Google’s free $300 credit program</li>
<li>Control who can charge to your account by limiting who can “share” permission to compute - yourself and any designated “Lab Managers”</li>
</ol>
<ol start="2" style="list-style-type: decimal">
<li>COST TRANSPARENCY</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>Allow fine-grain accounting of who spent what by creating individual “Billing Projects” for each user</li>
<li>Monitor costs by setting up email alerts to warn you when you reach spending thresholds</li>
<li>Enable detailed analysis of costs by exporting cost data using BigQuery</li>
</ol>
<ol start="3" style="list-style-type: decimal">
<li>DATA ACCESS CONTROLS</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>Reduce unwanted access by limiting who can “share” your data and analyses - yourself and any designated “Lab Managers”</li>
<li>Stricter data access management can be enforced through “Authorization Domains”; however this can make future sharing and publication difficult. This guide recommends avoiding Authorization Domains for most uses, especially as you are starting out. If you are working with highly sensitive data, see <a href="https://support.terra.bio/hc/en-us/articles/360026775691-Managing-data-privacy-and-access-with-Authorization-Domains">this documentation</a> for more information.</li>
</ol>
<p>These design decisions are made to help you get up and running as quickly as possible without overwhelming new users. As your experience and comfort with AnVIL grows, you will likely change your design to better match your unique needs e.g. enabling Authorization Domains when working with protected data.</p>
</div>
<div id="before-you-start" class="section level3 hasAnchor" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Before You Start<a href="pis-and-lab-managers.html#before-you-start" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>You will need a <strong>credit card or bank account</strong> to activate your free trial and get started. Don’t worry! <strong>You won’t be billed until you explicitly turn on automatic billing</strong>, but payment information is needed for verification purposes.</li>
<li>Before setting up billing yourself, you may want to check with your institutional procurement office and see if they have a preferred account set-up method with Google (such as a third party reseller or an existing account).</li>
<li>To add lab members, you will need to know the Google account they will use to access Terra. You can send lab members to the <a href="data-analysts.html#data-analysts">Data Analysts</a> chapter for instructions on how they can sign up and start working on AnVIL. You can complete most setup steps without this information and then add them once you know the correct accounts.</li>
</ul>
</div>
<div id="account-setup-pis" class="section level3 hasAnchor" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> Starting Setup<a href="pis-and-lab-managers.html#account-setup-pis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>AnVIL uses <a href="https://anvil.terra.bio/">Terra</a> to run analyses. Terra operates on Google Cloud Platform (GCP), so you’ll pay for all storage and analysis costs through a Google account linked to Terra. The costs are the standard Google Cloud Platform fees for storing and moving data as well as executing an analysis. These costs are passed along through Terra without any markup.</p>
<p><img src="02-pis_files/figure-html/1c272-o1y4OdLu0hzr-5xDyTyrJVEmp8Jg55TPDgGZik_gd84a304855_0_138.png" alt="Diagram outlining the roles of Google and Terra for AnVIL.  A 'PI' signs in with a Google ID, which lets them create a Google Billing Account.  Money flows from the Google Billing Account to a Terra Billing Project, and then to individual Terra Workspaces" width="480" /></p>
<ol style="list-style-type: decimal">
<li>Create a Google account</li>
<li>Set up Google Billing (and claim your free credits!).
<ul>
<li>Add an administrator or viewer (optional)</li>
</ul></li>
<li>Link Terra to the Google Billing Account</li>
<li>Create Terra Billing Projects</li>
<li>Set budgets and alerts (optional, but highly recommended)</li>
<li>Add users and Workspaces</li>
</ol>
</div>
<div id="lab-management-roles" class="section level3 hasAnchor" number="2.1.5">
<h3><span class="header-section-number">2.1.5</span> Lab Management Roles<a href="pis-and-lab-managers.html#lab-management-roles" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While there are many ways to configure your lab, this guide defines the following roles and responsibilities:</p>
<ul>
<li><p><strong>PI</strong> - The PI sets up the lab’s Google Cloud Account, creates its Google Billing Account(s), and Google Payment Method(s), links Terra with GCP, and invites Lab Managers to be Google Cloud “Billing Account Users.”</p></li>
<li><p><strong>Lab Manager</strong> (Optional) - A Lab Manager creates or clones Terra Workspaces and manages who can use those Workspaces. The Lab Manager is also responsible for creating one or more Terra Billing Projects configuring GCP budgets and alerts. Importantly, <strong>lab managers control who can spend lab money</strong> and should have an understanding of Google Cloud Billing and Terra Billing Projects. Depending on your lab, the PI may choose to be the only Lab Manager, or may appoint trusted lab members to assist.</p></li>
<li><p><strong>Data Analyst</strong> - A lab member who is granted write + can-compute access on one or more Terra Workspaces by a Lab Manager and who will run analyses in Terra. Data Analysts cannot share Terra Workspaces (this prevents them from enabling others to spend lab money).</p></li>
</ul>
</div>
</div>
<div id="pis-step-1" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Step 1: Create a Google Account<a href="pis-and-lab-managers.html#pis-step-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="02-pis_files/figure-html/1c272-o1y4OdLu0hzr-5xDyTyrJVEmp8Jg55TPDgGZik_gd5c49c5c55_0_160.png" alt="Diagram showing an overview of the six steps. Step 1 is highlighted." width="480" /></p>
<p>Terra operates on Google Cloud Platform, so you will need a (free) Google account which will allow you to</p>
<ul>
<li>Access the Terra platform to manage team members, data, and analyses</li>
<li>Access Google Cloud Platform to manage billing</li>
<li>Receive alerts when spending reaches specified thresholds</li>
</ul>
<p>If you do not already have a Google account that you would like to use for accessing Terra, <a href="https://accounts.google.com/SignUp">create one now</a>.</p>
<p>If you would like to create a Google account that is associated with your non-Gmail, institutional email address, follow <a href="https://support.terra.bio/hc/en-us/articles/360029186611">these instructions</a>.</p>
</div>
<div id="step-2-set-up-google-billing" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Step 2: Set Up Google Billing<a href="pis-and-lab-managers.html#step-2-set-up-google-billing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="02-pis_files/figure-html/1c272-o1y4OdLu0hzr-5xDyTyrJVEmp8Jg55TPDgGZik_gd5c49c5c55_0_170.png" alt="Diagram showing an overview of the six steps. Step 2 is highlighted." width="480" /></p>
<p>Terra operates on Google Cloud Platform, and does not charge any markup. Rather than paying Terra or AnVIL, users set up billing directly with Google Cloud Platform.</p>
<p><strong>Make sure to use the same Google account ID you use to log into Terra for Google Cloud Billing.</strong></p>
<p>To set up billing, you must first create a <strong>Google “Billing Account”</strong>.
You can create multiple Billing Accounts associated with your Google ID. We recommend creating separate Billing Accounts for different funding sources.</p>
<div id="create-a-google-billing-account" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Create a Google Billing Account<a href="pis-and-lab-managers.html#create-a-google-billing-account" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Log in to the <a href="https://console.cloud.google.com/">Google Cloud Platform</a> console using your Google ID. <strong>Make sure to use the same Google account ID you use to log into Terra.</strong></p></li>
<li><p>If you are a first time user, don’t forget to claim your free credits! If you haven’t been to the console before, once you accept the Terms of Service you will be greeted with an invitation to “Try for Free.”</p>
<p><img src="02-pis_files/figure-html/1tGpzZaQxoTAcxs_nyyNL2FOqypjEofEnMVpBtZiAw4A_g116ca06e27d_0_0.png" alt="Screenshot of the Google Cloud Console with the &quot;Try for Free&quot; button highlighted." width="480" /></p></li>
<li><p>Follow the instructions to sign up for a Billing Account and get your credits.</p></li>
<li><p>Choose “Individual Account”. This “billing account” is just for managing billing, so you don’t need to be able to add your team members. You will need to give either a credit card or bank account for security. Don’t worry! <strong>You won’t be billed until you explicitly turn on automatic billing</strong>.</p>
<p><img src="02-pis_files/figure-html/1tGpzZaQxoTAcxs_nyyNL2FOqypjEofEnMVpBtZiAw4A_g116ca06e27d_0_146.png" alt="Screenshot of the Google Cloud Billing Account Setup, with &quot;Individual Account&quot; highlighted.  Also highlighted is text stating &quot;You won't be charged unless you manually upgrade to a paid account.&quot;" width="480" /></p></li>
<li><p>You can view and edit your new Billing Account, by selecting “Billing” from the left-hand menu, or going directly to the billing console <a href="https://console.cloud.google.com/billing">console.cloud.google.com/billing</a></p>
<p><img src="02-pis_files/figure-html/1tGpzZaQxoTAcxs_nyyNL2FOqypjEofEnMVpBtZiAw4A_g116ca06e27d_0_293.png" alt="Screenshot of the Google Cloud Console dropdown menu, with &quot;Billing&quot; highlighted." width="480" /></p></li>
<li><p>Clicking on the Billing Account name will allow you to manage the account, including accessing reports, setting alerts, and managing payments and billing.</p>
<p><img src="02-pis_files/figure-html/1tGpzZaQxoTAcxs_nyyNL2FOqypjEofEnMVpBtZiAw4A_g116ca06e27d_0_437.png" alt="Screenshot of the Google Cloud Console Billing Page, with the name of the new billing account highlighted." width="480" /></p></li>
</ol>
<p>At any point, you can create additional Billing Accounts using the <strong>Create Account</strong> button. We generally recommend creating a new Billing Account for each funding source.</p>
</div>
<div id="add-users-or-viewers-optional" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Add Users or Viewers (optional)<a href="pis-and-lab-managers.html#add-users-or-viewers-optional" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you have a project manager or finance administrator who needs access to a Billing Account, you can add them with a few different levels of permissions. Generally the most useful are:</p>
<ul>
<li><strong>Users</strong> have a great deal of power over spending - they can create new “Billing Projects” and control who can spend money on those projects. If you have a lab or accounts manager responsible for expenses, it may make sense to add them as a Billing Account User. If you wish to retain full control over who can spend money on GCP, you should not add any Users.</li>
<li><strong>Viewers</strong> can see the activity in the Billing Account but can’t make any changes. This can be useful for finance staff who need access to the reports, or for lab members to be able to see what their analyses are costing.</li>
</ul>
<p>Anyone you wish to add to the Billing Account will need their own Google ID.</p>
<p>To add a member to a Billing Project:</p>
<ol style="list-style-type: decimal">
<li><p>Log in to the <a href="https://console.cloud.google.com/">Google Cloud Platform</a> console using your Google ID.</p></li>
<li><p>Navigate to <a href="https://console.cloud.google.com/billing">Billing</a></p>
<p><img src="02-pis_files/figure-html/1j1wRbaDyHJJhZQcWcP4xeYgIoaIBRIF3LIZpiDPBumw_g115e284bdc2_0_144.png" alt="Screenshot of the Google Cloud Console drop-down menu, with &quot;Billing&quot; highlighted." width="480" /></p></li>
<li><p>You may be automatically directed to view a specific Billing Account. If you see information about a single account rather than a list of your Billing Accounts, you can get back to the list by clicking “Manage Billing Accounts” from the drop-down menu.</p>
<p><img src="02-pis_files/figure-html/1j1wRbaDyHJJhZQcWcP4xeYgIoaIBRIF3LIZpiDPBumw_g115e284bdc2_0_295.png" alt="Screenshot of an individual Google Cloud Billing Account with the drop-down menu item &quot;Manage Billing Accounts&quot; highlighted." width="480" /></p></li>
<li><p>Check the box next to the Billing Account you wish to add a member to, click “ADD MEMBER”.</p>
<p><img src="02-pis_files/figure-html/1j1wRbaDyHJJhZQcWcP4xeYgIoaIBRIF3LIZpiDPBumw_g116e2c647a7_0_151.png" alt="Screenshot of Google Cloud Billing Accounts Overview. The checkbox next to the name of a Billing Account is checked and highlighted, and the &quot;Add Member&quot; button is highlighted." width="480" /></p></li>
<li><p>Enter their Google ID in the text box. In the drop-down menu, mouse over Billing, then choose the appropriate role.</p>
<p><img src="02-pis_files/figure-html/1j1wRbaDyHJJhZQcWcP4xeYgIoaIBRIF3LIZpiDPBumw_g116e2c647a7_0_296.png" alt="Screenshot of the dialogue box for adding a member to a Google Cloud Billing Accounts. In the drop-down menu labeled &quot;Select a Role&quot;, the item &quot;Billing&quot; and the submenu item &quot;Billing Account Viewer&quot; are highlighted." width="480" /></p></li>
<li><p>Click “SAVE”.</p>
<p><img src="02-pis_files/figure-html/1j1wRbaDyHJJhZQcWcP4xeYgIoaIBRIF3LIZpiDPBumw_g116e2c647a7_0_441.png" alt="Screenshot of the dialogue box for adding a member to a Google Cloud Billing Accounts. The Save button is highlighted." width="480" /></p></li>
</ol>
</div>
</div>
<div id="step-3-add-terra-to-google-billing-account" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Step 3: Add Terra to Google Billing Account<a href="pis-and-lab-managers.html#step-3-add-terra-to-google-billing-account" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="02-pis_files/figure-html/1c272-o1y4OdLu0hzr-5xDyTyrJVEmp8Jg55TPDgGZik_gd84a304855_0_198.png" alt="Diagram showing an overview of the six steps. Step 3 is highlighted." width="480" /></p>
<p>This gives Terra permission to create projects and send charges to the Google Billing Account, and must be done by an administrator of the Google Billing Account.</p>
<p>Terra needs to be added as a “Billing Account User”:</p>
<ol style="list-style-type: decimal">
<li><p>Log in to the <a href="https://console.cloud.google.com/">Google Cloud Platform</a> console using your Google ID.</p></li>
<li><p>Navigate to <a href="https://console.cloud.google.com/billing">Billing</a></p>
<p><img src="02-pis_files/figure-html/1OqSVH5Y4v97-OKMnEDGGuhKBJwc9fyXc-Q1-ivbeZmA_g115e284bdc2_0_144.png" alt="Screenshot of the Google Cloud Console drop-down menu, with &quot;Billing&quot; highlighted." width="480" /></p></li>
<li><p>You may be automatically directed to view a specific Billing Account. If you see information about a single account rather than a list of your Billing Accounts, you can get back to the list by clicking “Manage Billing Accounts” from the drop-down menu.</p>
<p><img src="02-pis_files/figure-html/1OqSVH5Y4v97-OKMnEDGGuhKBJwc9fyXc-Q1-ivbeZmA_g115e284bdc2_0_295.png" alt="Screenshot of an individual Google Cloud Billing Account with the drop-down menu item &quot;Manage Billing Accounts&quot; highlighted." width="480" /></p></li>
<li><p>Check the box next to the Billing Account you wish to add Terra to, click “ADD MEMBER”.</p>
<p><img src="02-pis_files/figure-html/1OqSVH5Y4v97-OKMnEDGGuhKBJwc9fyXc-Q1-ivbeZmA_g116e2c647a7_0_151.png" alt="Screenshot of Google Cloud Billing Accounts Overview. The checkbox next to the name of a Billing Account is checked and highlighted, and the &quot;Add Member&quot; button is highlighted." width="480" /></p></li>
<li><p>Enter <code>terra-billing@terra.bio</code> in the text box. In the drop-down menu, mouse over Billing, then choose “<strong>Billing Account User</strong>”.</p>
<p><img src="02-pis_files/figure-html/1OqSVH5Y4v97-OKMnEDGGuhKBJwc9fyXc-Q1-ivbeZmA_g116e2d0fe67_0_0.png" alt="Screenshot of the dialogue box for adding a member to a Google Cloud Billing Accounts. The text box is highlighted and has been filled in with &quot;terra-billing@terra.bio&quot;.  In the drop-down menu labeled &quot;Select a Role&quot;, the item &quot;Billing&quot; and the submenu item &quot;Billing Account User&quot; are highlighted." width="480" /></p></li>
<li><p>Click “SAVE”.</p>
<p><img src="02-pis_files/figure-html/1OqSVH5Y4v97-OKMnEDGGuhKBJwc9fyXc-Q1-ivbeZmA_g116e2d0fe67_0_146.png" alt="Screenshot of the dialogue box for adding a member to a Google Cloud Billing Accounts. The Save button is highlighted." width="480" /></p></li>
</ol>
</div>
<div id="step-4-create-terra-billing-projects" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Step 4: Create Terra Billing Projects<a href="pis-and-lab-managers.html#step-4-create-terra-billing-projects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="02-pis_files/figure-html/1c272-o1y4OdLu0hzr-5xDyTyrJVEmp8Jg55TPDgGZik_gd84a304855_0_217.png" alt="Diagram showing an overview of the six steps. Step 4 is highlighted." width="480" /></p>
<p>This is how you enable Terra users to charge to the Google Billing Account.</p>
<p>Note that Google will report charges at the level of Billing Projects. <strong>If you create only one Billing Project for your lab, you will not be able to see a breakdown of where charges are coming from</strong>.</p>
<p>It is highly recommended that you create separate Billing Projects for each category of spending you would like to track. For example:</p>
<ul>
<li>A Billing Project for each <strong>lab member</strong>, if you would like to track individual spending</li>
<li>A Billing Project for each <strong>analysis type</strong>, if you would like to track spending on e.g. RNA-seq vs. variant calling.</li>
<li>A Billing Project for each <strong>cohort</strong>, if you would like to track spending per data set</li>
</ul>
<p>If you are uncertain, <strong>we recommend starting by setting up a Billing Project per lab member</strong>. This makes it easy to track lab member spending, and also makes it easier to cleanly shut down projects when a member leaves the lab.</p>
<div id="create-a-billing-project" class="section level3 hasAnchor" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Create a Billing Project<a href="pis-and-lab-managers.html#create-a-billing-project" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p><a href="https://anvil.terra.bio/#workspaces">Launch Terra</a> and sign in with your Google account. If this is your first time logging in to Terra, you will need to accept the Terms of Service.</p></li>
<li><p>In the drop-down menu on the left, navigate to “Billing”. Click the triple bar in the top left corner to access the menu. Click the arrow next to your name to expand the menu, then click “Billing”. You can also navigate there directly with this link: <a href="https://anvil.terra.bio/#billing" class="uri">https://anvil.terra.bio/#billing</a></p>
<p><img src="02-pis_files/figure-html/1POwxqv4p6AfPHJlN9VNq0TaT44fA2RAFSpIERIMHdWU_g116f8d759be_0_2.png" alt="Screenshot of the Terra drop-down menu.  Three items are highlighted: 1) the &quot;hamburger&quot; button for extending the drop-down menu, 2) the arrow next to your username, for extending the drop-down submenu, and 3) the submenu item &quot;Billing&quot;." width="100%" /></p></li>
<li><p>On the Billing page, click the “+ CREATE” button to create a new Billing Project. Select GCP Billing Project (Google’s Platform). If prompted, select the Google account to use and give Terra permission to manage Google Cloud Platform billing accounts.</p>
<p><img src="02-pis_files/figure-html/1POwxqv4p6AfPHJlN9VNq0TaT44fA2RAFSpIERIMHdWU_g116f8d759be_0_149.png" alt="Screenshot of the Terra Billing Page.  The &quot;plus&quot; button next to &quot;Billing Projects&quot; is highlighted." width="100%" /></p></li>
<li><p>Enter a <strong>unique</strong> name for your Terra Billing Project and select the appropriate Google Billing Account. The name of the Terra Billing Project must:</p>
<ul>
<li>Only contain lowercase letters, numbers and hyphens</li>
<li>Start with a lowercase letter</li>
<li>Not end with a hyphen</li>
<li>Be between 6 and 30 characters</li>
</ul>
<p><img src="02-pis_files/figure-html/1POwxqv4p6AfPHJlN9VNq0TaT44fA2RAFSpIERIMHdWU_g116f8d759be_0_293.png" alt="Screenshot of the Terra Add Billing Project dialog box." width="100%" /></p></li>
<li><p>Select the Google Billing Account to use. All activities conducted under your new Terra Billing Project will charge to this Google Billing Account. If prompted, give Terra permission to manage Google Cloud Platform billing accounts.</p>
<p><img src="02-pis_files/figure-html/1POwxqv4p6AfPHJlN9VNq0TaT44fA2RAFSpIERIMHdWU_g2105956e909_0_0.png" alt="Screenshot of the Terra Add Billing Project dialog box.  The dropdown menu labeled &quot;Select billing account&quot; is highlighted." width="100%" /></p></li>
<li><p>Click “Create”.</p>
<p><img src="02-pis_files/figure-html/1POwxqv4p6AfPHJlN9VNq0TaT44fA2RAFSpIERIMHdWU_g116f8d759be_0_438.png" alt="Screenshot of the Terra Add Billing Project dialog box.  The button labeled &quot;CREATE BILLING PROJECT&quot; is highlighted." width="100%" /></p></li>
<li><p>Your new Billing Project should now show up in the list of Billing Projects Owned by You. You can add additional members or can modify or deactivate the Billing Project at any time by clicking on its name in this list.</p>
<p><img src="02-pis_files/figure-html/1POwxqv4p6AfPHJlN9VNq0TaT44fA2RAFSpIERIMHdWU_g2105956e909_0_16.png" alt="Screenshot of the Terra Billing Projects menu.  The submenu &quot;Owned by you&quot; is highlighted and has been expanded, showing a list of Billing Projects below.  One of the Billing Project names is highlighted." width="100%" /></p></li>
</ol>
<p>The page doesn’t always update as soon as the Billing Project is created. If it’s been a couple of minutes and you don’t see a change, try refreshing the page.</p>
<p>As mentioned above, we recommend creating separate Terra Billing Projects for each of your team members so you can track their spending. These Billing Projects can all be associated with the same Google Billing Account if they are all funded by the same source.</p>
<p><strong>Having trouble?</strong></p>
<ul>
<li>Check out the <a href="troubleshooting.html#troubleshooting">Troubleshooting</a> appendix</li>
<li>Visit our community support forum at <a href="https://help.anvilproject.org"><code>help.anvilproject.org</code></a> with any questions.</li>
</ul>
</div>
</div>
<div id="step-5-set-budgets-and-alerts" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Step 5: Set Budgets and Alerts<a href="pis-and-lab-managers.html#step-5-set-budgets-and-alerts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="02-pis_files/figure-html/1c272-o1y4OdLu0hzr-5xDyTyrJVEmp8Jg55TPDgGZik_gda79c11827_0_0.png" alt="Diagram showing an overview of the six steps. Step 5 is highlighted." width="480" /></p>
<p>Cloud computing can save a great deal of money, time and effort by providing compute on an as-needed basis. However, care must be taken that users do not accidentally request excessive resources, or leave resources running when not needed.</p>
<p>Unfortunately, there are two issues that make direct cost control difficult:</p>
<ul>
<li><strong>The Google Cloud billing interface does not provide a way to automatically cancel computations when a spending threshold is reached</strong></li>
<li><strong>Compute costs are reported with a delay (~1 day)</strong></li>
</ul>
<p>As a PI or lab manager, there are some steps you can take to help monitor and limit spending:</p>
<ul>
<li>Be careful with members and permissions in your Billing Projects and Workspaces on Terra (see <a href="pis-and-lab-managers.html#step-6-add-users-and-workspaces">Adding Users and Workspaces</a> for recommended setup)</li>
<li>Most importantly, <strong>monitor your spending</strong> so you can shut down unnecessary expensive activities before they have time to accumulate.</li>
<li>Terra provides <a href="https://support.terra.bio/hc/en-us/sections/360006459511-Controlling-Cloud-costs">extensive documentation and examples</a> regarding cost management while working in the cloud</li>
</ul>
<p><strong>We highly recommended you set budgets and alerts to notify you if spending starts to exceed expectations</strong>. This will make it easier to notice and shut down any accidental overspending. A good starting point is to set a monthly budget, and then set alerts at <strong>50 percent</strong> and <strong>90 percent</strong> of expected spend. You can add additional alerts if you desire.</p>
<p>You can set a single Budget for your entire lab, set up individual budgets for each Billing Project, or even set budgets for certain subsets of your Billing Projects. This will depend on the size of your lab and how closely you want to monitor spending. More granular budgets make it quicker to notice and track down overspending from a particular project but mean you will get more emails every month. When setting budgets with broader scope, you can always find out which particular Billing Project is spending the money by checking in the GCP Billing interface. <strong>NOTE: that there may be some restrictions on the budgets and alerts you can set while you’re using GCP’s free credits.</strong> At the time of writing (Feb 2021) you are not able to set budgets for individual projects while you are using the GCP free credits, but can still set an overall budget. Any restrictions should be lifted when you upgrade to a paid account.</p>
<div id="set-alerts" class="section level3 hasAnchor" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> Set Alerts<a href="pis-and-lab-managers.html#set-alerts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Log in to the <a href="https://console.cloud.google.com/">Google Cloud Platform</a> console using the Google ID associated with your Google Cloud projects.</p></li>
<li><p>Open the dropdown menu on the top left and click on <a href="https://console.cloud.google.com/billing">Billing</a>.</p>
<p><img src="02-pis_files/figure-html/1GBYTx25VzBFh7kI_elgMC0fmOMm4YhcfW8wIJ1EkmKY_g115e284bdc2_0_144.png" alt="Screenshot of the Google Cloud Console drop-down menu, with &quot;Billing&quot; highlighted." width="480" /></p></li>
<li><p>You may be automatically directed to view a specific Billing Account. If you see information about a single account (and it’s not the one you’re interested in), you can get back to the list of all your Billing Accounts by clicking “Manage Billing Accounts” from the drop-down menu.</p>
<p><img src="02-pis_files/figure-html/1GBYTx25VzBFh7kI_elgMC0fmOMm4YhcfW8wIJ1EkmKY_g115e284bdc2_0_295.png" alt="Screenshot of an individual Google Cloud Billing Account with the drop-down menu item &quot;Manage Billing Accounts&quot; highlighted." width="480" /></p></li>
<li><p>Click on the name of the Billing Account you want to set alerts for.</p>
<p><img src="02-pis_files/figure-html/1GBYTx25VzBFh7kI_elgMC0fmOMm4YhcfW8wIJ1EkmKY_g115e284bdc2_0_150.png" alt="Screenshot of Google Cloud Billing Accounts Overview. A Billing Account name is highlighted." width="480" /></p></li>
<li><p>In the left-hand menu, click “Budgets &amp; alerts”.</p>
<p><img src="02-pis_files/figure-html/1GBYTx25VzBFh7kI_elgMC0fmOMm4YhcfW8wIJ1EkmKY_g115e284bdc2_0_442.png" alt="Screenshot of an individual Google Cloud Billing Account with the left-hand menu item &quot;Budgets &amp; alerts&quot; highlighted." width="480" /></p></li>
<li><p>Click the “Create Budget” tab.</p>
<p><img src="02-pis_files/figure-html/1GBYTx25VzBFh7kI_elgMC0fmOMm4YhcfW8wIJ1EkmKY_g115e284bdc2_0_587.png" alt="Screenshot of the budgets and alerts page for a Google Cloud Billing Account. The &quot;Create Budget&quot; button highlighted." width="480" /></p></li>
<li><p>Enter a name for your budget, and then choose which projects you want to monitor. Then click “Next”.</p>
<p><img src="02-pis_files/figure-html/1GBYTx25VzBFh7kI_elgMC0fmOMm4YhcfW8wIJ1EkmKY_g115e284bdc2_0_732.png" alt="Screenshot of the form for setting budget scope for a Google Cloud Billing Account. Three things are highlighted:  1) the box for entering a &quot;Name&quot; for the budget, 2) the dropdown menu labeled &quot;Projects&quot; for selecting which Billing Projects are part of the budget, and 3) the &quot;Next&quot; button." width="480" /></p></li>
<li><p>For Budget Type, select “Specified amount”. Enter the total budget amount for the month (you will set alerts at different thresholds in the next step). Click “<strong>Next</strong>” (do not click “Finish”).</p>
<p><img src="02-pis_files/figure-html/1GBYTx25VzBFh7kI_elgMC0fmOMm4YhcfW8wIJ1EkmKY_g115e284bdc2_0_878.png" alt="Screenshot of the form for setting budget amount for a Google Cloud Billing Account.  The drop-down menu labeled &quot;Budget type&quot; is highlighted and &quot;Specified amount&quot; is selected.  Also highlighted are the text box labeled &quot;Target amount&quot; and the &quot;Next&quot; button." width="480" /></p></li>
<li><p>Enter the threshold amounts where you want to receive an alert. We recommend starting with 50% and 90%. You can set other alerts if you prefer.</p>
<p><img src="02-pis_files/figure-html/1GBYTx25VzBFh7kI_elgMC0fmOMm4YhcfW8wIJ1EkmKY_g115e284bdc2_0_1025.png" alt="Screenshot of the form for setting budget actions for a Google Cloud Billing Account.  The boxes for entering &quot;Percent of budget&quot; or &quot;Amount&quot; are highlighted.  The drop-down menu labeled &quot;Trigger on&quot; is highlighted and &quot;Actual&quot; is selected." width="480" /></p></li>
<li><p>Check the box for “Email alerts to billing admins and users”, then click “<strong>Finish</strong>”. Now you (as the owner and admin), along with anyone you added with admin or user privileges (e.g. lab managers) will receive alerts when your lab members reach the specified spending thresholds. These emails will be sent to the Gmail accounts associated with the Billing Account.</p>
<p><img src="02-pis_files/figure-html/1GBYTx25VzBFh7kI_elgMC0fmOMm4YhcfW8wIJ1EkmKY_g115e284bdc2_0_1169.png" alt="Screenshot of the form for setting budget alerts for a Google Cloud Billing Account.  The checkbox labeled &quot;Email alerts to billing admins and users&quot; is highligheted and checked.  The &quot;Finish&quot; button is highlighted." width="480" /></p></li>
<li><p>You can edit your budgets at any time by going to Billing &gt; Budgets &amp; alerts, and clicking on the name of the budget you want to edit.</p>
<p><img src="02-pis_files/figure-html/1GBYTx25VzBFh7kI_elgMC0fmOMm4YhcfW8wIJ1EkmKY_g115e284bdc2_0_1314.png" alt="Screenshot of the Google Cloud Billing Account Budgets and alerts overview.  Four items are highlighted illustrating how to view and edit an existing budget: 1) The top-left &quot;hamburger&quot; button for extending the drop-down menu, 2) the drop-down menu item &quot;Billing&quot;, 3) the submenu item &quot;Budgets &amp; alerts, 4) the name of a budget." width="480" /></p></li>
</ol>
</div>
<div id="view-spend" class="section level3 hasAnchor" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> View spend<a href="pis-and-lab-managers.html#view-spend" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can always check your current spend through the Google Billing console, but remember</p>
<ul>
<li>There is a reporting delay (~1 day), so you cannot immediately see what an analysis cost</li>
<li>Costs are reported at the level of Workspaces, so if there are multiple people using a Workspace, you will not be able to determine which of them was responsible for the charges.</li>
</ul>
<p>The Google Billing console displays information by Billing Account. To view spending:</p>
<ol style="list-style-type: decimal">
<li><p>Log in to the <a href="https://console.cloud.google.com/">Google Cloud Platform</a> console using the Google ID associated with your Google Cloud projects.</p></li>
<li><p>Open the dropdown menu on the top left and click on <a href="https://console.cloud.google.com/billing">Billing</a>.</p>
<p><img src="02-pis_files/figure-html/1Ofs1As7XZWmxnaBOZvNYzAiuuaYgn1ce700eHyCNg2Y_g115e284bdc2_0_144.png" alt="Screenshot of the Google Cloud Console drop-down menu, with &quot;Billing&quot; highlighted." width="480" /></p></li>
<li><p>You may be automatically directed to view a specific Billing Account. If you see information about a single account (and it’s not the one you’re interested in), you can get back to the list of all your Billing Accounts by clicking “Manage Billing Accounts” from the drop-down menu.</p>
<p><img src="02-pis_files/figure-html/1Ofs1As7XZWmxnaBOZvNYzAiuuaYgn1ce700eHyCNg2Y_g115e284bdc2_0_295.png" alt="Screenshot of an individual Google Cloud Billing Account with the drop-down menu item &quot;Manage Billing Accounts&quot; highlighted." width="480" /></p></li>
<li><p>Click on the name of the Billing Account for the project you want to view.</p>
<p><img src="02-pis_files/figure-html/1Ofs1As7XZWmxnaBOZvNYzAiuuaYgn1ce700eHyCNg2Y_g115e284bdc2_0_150.png" alt="Screenshot of Google Cloud Billing Accounts Overview. A Billing Account name is highlighted." width="480" /></p></li>
<li><p>Look at the top of the <strong>Overview</strong> tab to see your month-to-date spending.</p>
<p><img src="02-pis_files/figure-html/1Ofs1As7XZWmxnaBOZvNYzAiuuaYgn1ce700eHyCNg2Y_g1149729109c_0_0.png" alt="Screenshot of a Google Cloud Billing Account Overview." width="480" /></p></li>
<li><p>Scroll further down the <strong>Overview</strong> tab to show your top projects.</p>
<p><img src="02-pis_files/figure-html/1Ofs1As7XZWmxnaBOZvNYzAiuuaYgn1ce700eHyCNg2Y_g1149729109c_0_143.png" alt="Screenshot of a Google Cloud Billing Account top projects." width="480" /></p></li>
<li><p>Click on the <strong>Reports</strong> tab to see more detailed information about each of your projects. This is probably the most useful tab for exploring costs of individual projects over time.</p>
<p><img src="02-pis_files/figure-html/1Ofs1As7XZWmxnaBOZvNYzAiuuaYgn1ce700eHyCNg2Y_g1149729109c_0_433.png" alt="Screenshot of a Google Cloud Billing Account Reports tab." width="480" /></p></li>
<li><p>Click on the <strong>Cost table</strong> tab to obtain a convenient table of spending per project.</p>
<p><img src="02-pis_files/figure-html/1Ofs1As7XZWmxnaBOZvNYzAiuuaYgn1ce700eHyCNg2Y_g1149729109c_0_577.png" alt="Screenshot of a Google Cloud Billing Account Cost table tab." width="480" /></p></li>
</ol>
</div>
<div id="export-cost-data-to-bigquery" class="section level3 hasAnchor" number="2.6.3">
<h3><span class="header-section-number">2.6.3</span> Export Cost Data to BigQuery<a href="pis-and-lab-managers.html#export-cost-data-to-bigquery" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Coming soon – instructions on how to export your cost data so you can better analyze and control your expenses.</p>
</div>
</div>
<div id="step-6-add-users-and-workspaces" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Step 6: Add Users and Workspaces<a href="pis-and-lab-managers.html#step-6-add-users-and-workspaces" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="02-pis_files/figure-html/1c272-o1y4OdLu0hzr-5xDyTyrJVEmp8Jg55TPDgGZik_gda79c11827_0_64.png" alt="Diagram showing an overview of the six steps. Step 6 is highlighted." width="480" /></p>
<p>Finally, back on Terra, you can add lab members and give them permission to run analyses funded through your Billing Projects.</p>
<p>There are two primary ways to permit users to charge to your Billing Projects:</p>
<ul>
<li><strong>Add them directly to the Billing Project</strong>. This gives them flexibility to create and manage their own Workspaces, but reduces your control over spending. Anyone they add to their Workspaces with sufficient permissions (i.e. permission to compute) can charge to your Billing Project.</li>
<li><strong>Create a Workspace yourself, and add them to the Workspace</strong> (or have a designated Lab Manager responsible for managing Workspaces). This gives you much more control over who can charge to your Billing Project.</li>
</ul>
<p>Billing permissions on Terra can be confusing. For this reason, <strong>We recommend starting by having a single person responsible for managing all Workspaces (either yourself or a trusted “lab manager”). This person should create all Workspaces and add lab members as Writers (not Owners) to the Workspaces</strong>. This provides the greatest control over spending. Once you are familiar with the permissions system and are certain your lab members understand the implication of different permission settings, you may decide to give them greater control over Workspace access.</p>
<div id="create-a-new-workspace" class="section level3 hasAnchor" number="2.7.1">
<h3><span class="header-section-number">2.7.1</span> Create a New Workspace<a href="pis-and-lab-managers.html#create-a-new-workspace" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p><a href="https://anvil.terra.bio/#workspaces">Launch Terra</a></p></li>
<li><p>In the drop-down menu on the left, navigate to “Workspaces”. Click the triple bar in the top left corner to access the menu. Click “Workspaces”.</p>
<p><img src="02-pis_files/figure-html/1zyqZHITAthNhXeH2XQqA7FMOu2mek6wfgGEaje1KQsk_g117989bd49c_0_150.png" alt="Screenshot of Terra drop-down menu.  The &quot;hamburger&quot; button to extend the drop-down menu is highlighted, and the menu item &quot;Workspaces&quot; is highlighted." width="480" /></p></li>
<li><p>Click on the <strong>plus icon</strong> near the top of left of the page.</p>
<p><img src="02-pis_files/figure-html/1zyqZHITAthNhXeH2XQqA7FMOu2mek6wfgGEaje1KQsk_g117989bd49c_0_733.png" alt="Screenshot of Terra Workspaces page.  The &quot;+&quot; is highlighted." width="480" /></p></li>
<li><p>Name your Workspace and select the appropriate Billing Project. <strong>All activity in the Workspace will be charged to this Billing Project</strong> (regardless of who conducted it).</p>
<p><img src="02-pis_files/figure-html/1zyqZHITAthNhXeH2XQqA7FMOu2mek6wfgGEaje1KQsk_g117989bd49c_0_877.png" alt="Screenshot of Terra dialog box for creating a new Workspace.  The text box labeled &quot;Workspace name&quot; and the drop-down menu labeled &quot;Billing project&quot; are highlighted." width="480" /></p></li>
<li><p>If you are working with protected data, you can set the <strong>Authorization Domain</strong> to limit who can be added to your Workspace. Note that the Authorization Domain cannot be changed after the Workspace is created (i.e. there is no way to make this Workspace shareable with a larger audience in the future). Workspaces by default are only visible to people you specifically share them with. Authorization domains add an extra layer of enforcement over privacy, but by nature make sharing more complicated. We recommend using Authorization Domains in cases where it is extremely important and/or legally required that the data be kept private (e.g. protected patient data, industry data). For data you would merely prefer not be shared with the world, we recommend relying on standard Workspace sharing permissions rather than Authorization Domains, as Authorization Domains can make future collaborations, publications, or other sharing complicated.</p>
<p><img src="02-pis_files/figure-html/1zyqZHITAthNhXeH2XQqA7FMOu2mek6wfgGEaje1KQsk_g117989bd49c_0_1022.png" alt="Screenshot of Terra dialog box for creating a new Workspace.  The drop-down menu labeled &quot;Authorization domain&quot; is highlighted." width="480" /></p></li>
<li><p>Click “CREATE WORKSPACE”. The new Workspace should now show up under your Workspaces.</p>
<p><img src="02-pis_files/figure-html/1zyqZHITAthNhXeH2XQqA7FMOu2mek6wfgGEaje1KQsk_g117989bd49c_0_1166.png" alt="Screenshot of Terra dialog box for creating a new Workspace.  The &quot;Create Workspace&quot; button is highlighted." width="480" /></p></li>
</ol>
<p><strong>To start, we recommend creating one Workspace for each lab member</strong> (associated with that lab member’s Billing Project, with separate Billing Projects for your lab members). This will enable you and your lab members to familiarize yourself with Workspaces and decide how best to organize your work. You can then create additional Workspaces as needed.</p>
</div>
<div id="add-members-to-workspaces" class="section level3 hasAnchor" number="2.7.2">
<h3><span class="header-section-number">2.7.2</span> Add Members to Workspaces<a href="pis-and-lab-managers.html#add-members-to-workspaces" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Lab members must have logged in to Terra at least once before they can be added to your Billing Projects and Workspaces (they do not need to log in to Google Cloud Console). You can send lab members to the <a href="data-analysts.html#data-analysts">Data Analysts</a> guide for instructions on how they can sign up and start working on AnVIL.</p>
<p>Lab members can be added to a Workspace with a few different permission levels:</p>
<ul>
<li><strong>Readers</strong> can view the Workspace but not make edits or run analyses (i.e. they <strong>cannot spend your money</strong>)</li>
<li><strong>Writers</strong> can make edits and run analyses (i.e. they <strong>can spend your money</strong>)</li>
<li><strong>Owners</strong> can make edits and run analyses and can also manage the permissions of other users (i.e. they <strong>can enable others to spend your money</strong>)</li>
</ul>
<p><img src="02-pis_files/figure-html/1hhdPNfuAhbwkl5LlNVlJiCIx_rbzVp3jSJJeksqiR5I_g117dd5f15db_0_584.png" alt="Table summarizing Workspace permission levels." width="480" /></p>
<p>More details about the permissions associated with each Access Level can be found in the <a href="https://support.terra.bio/hc/en-us/articles/360025851892-Reader-writer-or-owner-Workspace-access-controls-explained">Terra documentation</a>.</p>
<p>Managing permissions for a Workspace has important implications:</p>
<ul>
<li><strong>Billing</strong>: Terra charges are associated with Workspaces rather than users. Any billable activity that takes place in a given Workspace will be charged to the associated Billing Project, regardless of who conducted the activity. If there are multiple users with permission to compute, it is impossible to tell who conducted the activity.</li>
<li><strong>Data access</strong>: Especially when working with protected data, it’s important to ensure that users have proper authorization to view the data before giving them access to a Workspace containing the data. Terra provides <strong>Authorization Domains</strong> to assist with this.</li>
</ul>
<p>In general we recommend:</p>
<ul>
<li><strong>Writers: Lab members who need permission to compute</strong> (and charge to your Billing Project). This gives them permission to freely use the Workspace, (adding and removing data, conducting analyses, etc.) but prevents them from adding additional members who could charge to your Billing Project. This ensures you have control over <em>who</em> is doing the spending.</li>
<li><strong>Readers: All other users</strong> (i.e. users who need to see the Workspace but should not charge to your Billing Project). Readers can always “clone” the Workspace (creating a copy of it associated with their own Billing Project) if they want to run computations themselves.</li>
<li>If working with protected data, take advantage of Authorization Domains to increase security.</li>
</ul>
<p>To add a member to a Workspace:</p>
<ol style="list-style-type: decimal">
<li><p><a href="https://anvil.terra.bio/#workspaces">Launch Terra</a></p></li>
<li><p>In the drop-down menu on the left, navigate to “Workspaces”. Click the triple bar in the top left corner to access the menu. Click “Workspaces”.</p>
<p><img src="02-pis_files/figure-html/1hhdPNfuAhbwkl5LlNVlJiCIx_rbzVp3jSJJeksqiR5I_g117989bd49c_0_150.png" alt="Screenshot of Terra drop-down menu.  The &quot;hamburger&quot; button to extend the drop-down menu is highlighted, and the menu item &quot;Workspaces&quot; is highlighted." width="480" /></p></li>
<li><p>Click on the name of the Workspace to open the Workspace. Opening a Workspace does not cost anything. Certain activities in the Workspace (such as running an analysis) will charge to the Workspace’s Billing Project. Workspace management (e.g. adding and removing members, editing the description) does not cost money.</p>
<p><img src="02-pis_files/figure-html/1hhdPNfuAhbwkl5LlNVlJiCIx_rbzVp3jSJJeksqiR5I_g117dd5f15db_0_289.png" alt="Screenshot of Terra Workspace page.  The name of a Workspace is highlighted." width="480" /></p></li>
<li><p>Click the teardrop button (<img src="https://raw.githubusercontent.com/jhudsl/AnVIL_Template/main/child/child_assets/teardrop_button.png" width="25" alt="teardrop button" />) on the right hand side to open the Workspace management menu. Click “Share”</p>
<p><img src="02-pis_files/figure-html/1hhdPNfuAhbwkl5LlNVlJiCIx_rbzVp3jSJJeksqiR5I_g117dd5f15db_0_295.png" alt="Screenshot of an individual Terra Workspace dashboard page.  The button for extending the Workspaces's drop-down menu is highlighted, and the menu item &quot;Share&quot; is highlighted." width="480" /></p></li>
<li><p>Enter the email address of the user or Group you’d like to share the Workspace with.</p>
<ul>
<li>If adding an individual, make sure to enter the account that they use to access AnVIL.</li>
<li>If adding a Terra Group, use the Group email address, which can be found on the Terra Group management page.</li>
</ul>
<p><img src="02-pis_files/figure-html/1hhdPNfuAhbwkl5LlNVlJiCIx_rbzVp3jSJJeksqiR5I_g117dd5f15db_0_440.png" alt="Screenshot of the dialog box for sharing a Terra Workspace.  The text box labeled &quot;User email&quot; is highlighted." width="480" /></p></li>
<li><p>Choose their permission level.</p>
<ul>
<li>Remember that all activity in the Workspace will be charged to the Workspace’s Billing Project, regardless of who conducts it, so only add members as “Writers” or “Owners” if they should be charging to the Workspace’s Billing Project.</li>
<li>“Readers” can view all parts of the Workspace but cannot make edits or run analyses (i.e. they cannot spend money). They can also clone their own copy of the Workspace where they can conduct activity on their own Billing Project.</li>
</ul>
<p><img src="02-pis_files/figure-html/1hhdPNfuAhbwkl5LlNVlJiCIx_rbzVp3jSJJeksqiR5I_g117dd5f15db_0_756.png" alt="Screenshot of the dialog box for sharing a Terra Workspace.  The drop-down menu labeled with the email of the user you are sharing with is highlighted and the menu item &quot;Writer&quot; is selected." width="480" /></p></li>
<li><p>Click “Save”. The user should now be able to see the Workspace when logged in to Terra.</p>
<p><img src="02-pis_files/figure-html/1hhdPNfuAhbwkl5LlNVlJiCIx_rbzVp3jSJJeksqiR5I_g117dd5f15db_0_902.png" alt="Screenshot of the dialog box for sharing a Terra Workspace.  The &quot;Save&quot; button is highlighted." width="480" /></p></li>
</ol>
</div>
<div id="request-quota-increase" class="section level3 hasAnchor" number="2.7.3">
<h3><span class="header-section-number">2.7.3</span> Request Quota Increase<a href="pis-and-lab-managers.html#request-quota-increase" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To prevent abuse, new users of GCP are only permitted to create a few Google Cloud “Projects”. When working on Terra, each Terra Workspace is associated with its own Google Cloud Project, so if your team has multiple members you can bump up against this limit fairly quickly and won’t be able to create more Workspaces.</p>
<p>Since this limit is imposed by Google, you will need to contact them directly to request a quota increase, using <a href="https://support.google.com/code/contact/billing_quota_increase">this form</a>.</p>
<p>At the time of writing (April 2022) Terra is working to expedite this process for Terra users; we recommend checking the <a href="https://support.terra.bio/hc/en-us/articles/360029071251#h_01FFNCK82NB0YMAH5BTP41GYSY">relevant Terra documentation</a> for the latest information as well as recommendations about how to fill out the form.</p>
</div>
</div>
<div id="pis-wrap-up" class="section level2 hasAnchor" number="2.8">
<h2><span class="header-section-number">2.8</span> Wrap-Up<a href="pis-and-lab-managers.html#pis-wrap-up" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Congratulations! You have successfully set up AnVIL for your lab!</strong></p>
<p>Your lab members should be free to carry out analyses in the Workspaces you created. You should not need to do any further configuration through Terra until you decide to add or change user permissions for your Billing Projects and Workspaces.</p>
<p>You can view costs at any time through <a href="https://console.cloud.google.com/billing">Google Cloud Billing</a>. Note that costs are reported with a delay (~1 day).</p>
<p>To learn more about billing and setup, we recommend checking out this <a href="https://leanpub.com/universities/courses/terra/billing-and-collaboration">Leanpub course</a>.</p>

</div>
</div>
<hr>
<center> 
  <div class="footer">
      All illustrations <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY. </a>
      <br>
      All other materials <a href= "https://creativecommons.org/licenses/by/4.0/"> CC-BY </a> unless noted otherwise.
  </div>
</center>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-analysts.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
